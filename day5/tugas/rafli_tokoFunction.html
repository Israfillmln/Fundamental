<script>
  // Untuk menyimpan data produk (buku) kita
  let products = ["Huracan", "Aventador", "Gallardo"];
  let productPrices = [149700, 141539, 123900];
  let productQty = [0, 0, 0, 0]; 
  // let productBought = [0, 0, 0, 0];
  
  const showMenu = (isPrompt = false) => {
    let productsList = "";
    
    for (let i = 0; i < products.length; i++) {
      productsList += `${i + 1}. ${products[i]} || $ ${productPrices[
        i
      ].toLocaleString()} \n`;
    }
    
    if (isPrompt) {
      let userInput = prompt(productsList);
      userInput = parseInt(userInput);
      
      let userInputIndex = userInput - 1;
      return userInputIndex;
    } else {
      alert(productsList);
    }
    
  };
  
  const adminAddData = () => {
    let userInputNewProduct = prompt("Moko tambah Mobil apa?");
    let userInputNewPrice = prompt("Berapa hargana?");
    userInputNewPrice = parseInt(userInputNewPrice);
  
    products.push(userInputNewProduct);
    productPrices.push(userInputNewPrice);
    productQty.push(0);
    // productBought.push(0);
  
    alert("Yoi Ta tambahmi!");

     };

  const adminDeleteData = () => {
      const userDeleteItemIndex = showMenu(true);
  
    products.splice(userDeleteItemIndex, 1);
    productPrices.splice(userDeleteItemIndex, 1);
    productQty.splice(userDeleteItemIndex, 1);
    // productBought.splice(userDeleteItemIndex, 1);
    };

  const adminEditData = () => {
    const userEditItemIndex = showMenu(true);

    let userEditValue = prompt(
      `Mau nu_ubah ${products[userEditItemIndex]} jadi apa bede?`
    );
    let userEditPriceValue = prompt("Harganya berapa?");
    userEditPriceValue = parseInt(userEditPriceValue);

    products[userEditItemIndex] = userEditValue;
    productPrices[userEditItemIndex] = userEditPriceValue;
    };

    // user Function

    const userAddToCart = () => {
      const userCartIndex = showMenu(true); 

          const userCartQty = parseInt(prompt(
        `Moko belli ${products[userCartIndex]} berapa ?`
      ));

          productQty[userCartIndex] = userCartQty;
          
      // const userCartIndex = showMenu(true);
  
      // let userCartQty = prompt(
      //   `Mau beli ${products[userCartIndex]} berapa banyak?`
      // );
      // userCartQty = parseInt(userCartQty);
  
      // productQty[userCartIndex] += userCartQty;
      // productBought[userCartIndex] += userCartQty;
    };

    do{
    const urMenuInput = prompt(`Login as :
    1. Admin
    2. User
    3. Exit`);

    if (urMenuInput == "1"){
      
      do{
          const admMenuInput = prompt(`Menu :
          1. Create Data
          2. Delete Data
          3. Show Data
          4. Edit Data
          5. Back`);
    
          // Jika user pilih tambah data
          if (admMenuInput == "1") {
            adminAddData();
          } else if (admMenuInput == "2") {
            adminDeleteData();
          } else if (admMenuInput == "3") {
            showMenu(false);
          // } else if (admMenuInput == "4") {
            // Jika user pilih update data
          } else if (admMenuInput == "4") {
            adminEditData();
            // let reportData = "";
            // let totalTransactionAmount = 0;
            // const adminEditDataIndex = showMenu(true)
            // for (let i = 0; i < products.length; i++) {
            //   reportData += `${i + 1}. ${products[i]} x ${
            //     productBought[i]
            //   } -> Rp. ${(
            //     productPrices[i] * productBought[
            //       i
            //     ]).toLocaleString()} \n`;
  
            //   totalTransactionAmount += productPrices[i] * productBought[i];
            // }
  
            // reportData += `Total besaran transaksi user = Rp. 
            // ${totalTransactionAmount.toLocaleString()}`;
  
            // alert(reportData);
          } else if (admMenuInput == "5") {
            break;
          }

        } while (true);
      
    } else if (urMenuInput == "2"){
      do{
        const usrMenuInput = prompt (`As user, what do u wanna do?
        1. Add to Cart
        2. Show Cart
        3. Checkout
        4. Back `)

        if (usrMenuInput == "1"){
          userAddToCart();
        } else if (usrMenuInput == "2"){
          let userCart = ""; 

          for ( let i = 0; i < products.length; i++){
            userCart += `${i + 1}. ${products[i]} x ${productQty[i]} = $ ${productPrices[i] * productQty[i]}\n`;
          }

          alert(userCart)
        } else if (usrMenuInput == "3"){

        } else if (usrMenuInput == "4"){
          break;
        }
      }while(true)
      
    } else if (urMenuInput == "3"){

      alert(`pulang mko`)
      break;
    }
     
  }while(true);

  
  
// ===============================================================================//
    
  
    // const userShowCart = (isCheckout = false) => {
    //   let userCart = "";
    //   let totalPrice = 0;
  
    //   for (let i = 0; i < products.length; i++) {
    //     userCart += `${i + 1}. ${products[i]} x ${productQty[i]} -> Rp. ${(
    //       productPrices[i] * productQty[i]
    //     ).toLocaleString()} \n`;
  
    //     totalPrice += productPrices[i] * productQty[i];
    //   }
  
    //   if (isCheckout) {
    //     // Tambah baris untuk total price
    //     userCart += `\n Total belanjaan anda adalah Rp. ${totalPrice.toLocaleString()}`;
  
    //     let userPayment = prompt(userCart);
    //     userPayment = parseInt(userPayment);
  
    //     // Kalau lebih (kembalian)
    //     if (userPayment > totalPrice) {
    //       alert(
    //         `Kembalian anda sebesar Rp. ${(
    //           userPayment - totalPrice
    //         ).toLocaleString()}`
    //       );
    //     } else if (userPayment === totalPrice) {
    //       alert("Terima kasih sudah membayar dengan uang pas");
    //     } else if (userPayment < totalPrice) {
    //       alert(
    //         `Uang anda kurang Rp. ${(totalPrice - userPayment).toLocaleString()}`
    //       );
    //     }
  
    //     for (let i = 0; i < productQty.length; i++) {
    //       productQty[i] = 0;
    //     }
  
    //     return;
    //   }
  
    //   alert(userCart);
    // };
  

    //   // Main menu
    //   const userMainMenuInput = prompt(`Login sebagai:
    //   1. Admin
    //   2. User
    //   3. Exit`);
  
      

  </script>